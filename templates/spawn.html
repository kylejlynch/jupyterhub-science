{% extends "page.html" -%}

{% if announcement_spawn is string -%}
  {% set announcement = announcement_spawn -%}
{% endif -%}

{% block head -%}
  {{ super() }}
  <style>
    .profile[data-profile-slug="python"] h3::before {
      content: "";
      display: inline-block;
      width: 24px;
      height: 24px;
      margin-right: 8px;
      background-image: url('{{ static_url("extra-assets/images/python-logo.svg") }}');
      background-size: contain;
      background-repeat: no-repeat;
      vertical-align: middle;
    }
    .profile[data-profile-slug="julia"] h3::before {
      content: "";
      display: inline-block;
      width: 24px;
      height: 24px;
      margin-right: 8px;
      background-image: url('{{ static_url("extra-assets/images/julia-logo.svg") }}');
      background-size: contain;
      background-repeat: no-repeat;
      vertical-align: middle;
    }
    .profile[data-profile-slug="r"] h3::before {
      content: "";
      display: inline-block;
      width: 24px;
      height: 24px;
      margin-right: 8px;
      background-image: url('{{ static_url("extra-assets/images/r-logo.svg") }}');
      background-size: contain;
      background-repeat: no-repeat;
      vertical-align: middle;
    }
    .profile[data-profile-slug="cpp"] h3::before {
      content: "";
      display: inline-block;
      width: 24px;
      height: 24px;
      margin-right: 8px;
      background-image: url('{{ static_url("extra-assets/images/cpp-logo.svg") }}');
      background-size: contain;
      background-repeat: no-repeat;
      vertical-align: middle;
    }
  </style>
{%- endblock head -%}

{% block main -%}
  <div class="container">
    {% block heading -%}
      <div class="row text-center">
        <h1>Server Options</h1>
      </div>
    {%- endblock heading -%}
    <div class="row justify-content-center">
      <div class="col-md-8">
        {% if for_user and user.name != for_user.name -%}
          <p>Spawning server for {{ for_user.name }}</p>
        {%- endif -%}
        {% if error_message -%}<p class="spawn-error-mmsg alert alert-danger">Error: {{ error_message }}</p>
        {%- endif -%}
        <form
          id="spawn_form"
          action="{{ url | safe }}"
          method="post"
          role="form"
        >
          {{ spawner_options_form | safe }}
          <br>
          <div class="feedback-container">
            <button type="submit" class="btn btn-jupyter form-control">Start</button>
            <div class="feedback widget hidden">
              <i class="fa fa-spinner"></i>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
{%- endblock main -%}

{% block script -%}
  {{ super() }}
  <script>
    // setup on Submit feedback
    $('form').submit((e) => {
      var form = $(e.target);
      form.find('.feedback-container>input').attr('disabled', true);
      form.find('.feedback-container>*').toggleClass('hidden');
      form.find('.feedback widget>*').toggleClass('fa-pulse');
    });
  </script>
{%- endblock script -%}
